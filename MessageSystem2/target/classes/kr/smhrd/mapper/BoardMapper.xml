<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kr.smhrd.mapper.BoardMapper">

	<insert id="insertBoard" parameterType="kr.smhrd.entity.Board">
		insert into board(title, writer, filename, content)
		values(#{title}, #{writer}, #{filename}, #{content})
	</insert>

	<select id="boardList" resultType="kr.smhrd.entity.Board">
		select * from board order by b_date desc
	</select>

	<select id="boardContent" parameterType="int" resultType="kr.smhrd.entity.Board">
		select * from board where idx = #{idx}
	</select>

	<delete id="boardDelete" parameterType="int">
		delete from board where idx = #{idx}	
	</delete>
	
	<select id="searchReview" parameterType="String" resultType="kr.smhrd.entity.Board">
SELECT
    p.prod_name AS prod_name,
    i.img_name AS img_name,
    r.*
FROM
    tb_prod p
LEFT JOIN
    tb_prod_image i ON p.prod_idx = i.prod_idx
LEFT JOIN
    tb_review r ON p.prod_idx = r.prod_idx
WHERE
    p.cust_id = #{cust_id}

UNION

SELECT
    p.prod_name,
    i.img_name,
    r.*
FROM
    tb_prod p
RIGHT JOIN
    tb_prod_image i ON p.prod_idx = i.prod_idx
RIGHT JOIN
    tb_review r ON p.prod_idx = r.prod_idx
WHERE
    p.cust_id = #{cust_id};
</select>





</mapper>